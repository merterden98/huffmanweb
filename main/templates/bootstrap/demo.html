<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Demo</title>

    {% load static %}
    <link href="{% static "css/bootstrap.min.css" %}"  rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static "css/imagesedits.css" %}">
    {% load static %}
    <link rel="stylesheet" href="{% static "css/animate.css" %}">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.19.1/vis.min.css"/>
 
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vivus@latest/dist/vivus.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.19.1/vis.min.js"/>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    {% load static %}
    <script src="{% static "js/bootstrap.min.js" %}"></script>


    {% load static %}
    <script src="{% static "js/demo.js" %}"></script>

    {% load static %}
    <script src="{% static "js/jquery.waypoints.min.js" %}"></script>
    
    {% load static %}
    <script src="{% static "js/jquery.drawsvg.js" %}"></script>

    

    

</head>
<body>

    <div class="container">

        <div class="row just">
                <svg id="demo" width="400.301" height="200.401" viewBox="0 0 235.301 67.401"><g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#000" stroke-width="1.0mm" fill="none" style="stroke: #eeeeee;;stroke-width:1.0mm;fill:none"><path d="M 120.5 59.701 L 120.5 38.201 Q 120.5 35.074 119.784 33.284 A 6.289 6.289 0 0 0 119.75 33.201 A 3.42 3.42 0 0 0 117.693 31.265 A 5.494 5.494 0 0 0 116.7 31.001 A 1.17 1.17 0 0 1 116.216 30.78 Q 115.821 30.465 115.801 29.774 A 2.579 2.579 0 0 1 115.8 29.701 Q 115.8 28.727 116.559 28.512 A 1.364 1.364 0 0 1 116.6 28.501 A 39.954 39.954 0 0 0 118.18 28.058 Q 118.989 27.812 119.669 27.561 A 16.031 16.031 0 0 0 120.9 27.051 Q 122.094 26.491 123.566 25.514 A 36.697 36.697 0 0 0 124.6 24.801 L 126.8 23.301 Q 126.9 23.301 127.15 23.101 A 0.917 0.917 0 0 1 127.438 22.942 A 0.837 0.837 0 0 1 127.7 22.901 Q 127.9 22.901 128.1 23.101 A 0.675 0.675 0 0 1 128.3 23.581 A 0.886 0.886 0 0 1 128.3 23.601 L 128.1 25.701 A 37.756 37.756 0 0 0 128.025 26.35 Q 127.963 26.932 127.9 27.651 Q 127.8 28.801 127.8 30.001 A 7.747 7.747 0 0 0 127.808 30.374 Q 127.834 30.895 127.936 31.106 A 0.346 0.346 0 0 0 128 31.201 L 128.2 31.201 A 24.979 24.979 0 0 1 134.552 26.635 A 20.666 20.666 0 0 1 143.8 24.501 Q 146.994 24.501 149.22 25.693 A 8.254 8.254 0 0 1 149.9 26.101 A 8.62 8.62 0 0 1 151.952 28.062 Q 153.003 29.435 153.8 31.401 L 154.1 31.401 A 31.317 31.317 0 0 1 160.049 27.196 A 21.696 21.696 0 0 1 170.4 24.501 A 8.057 8.057 0 0 1 176.716 27.347 A 11.258 11.258 0 0 1 177.7 28.651 A 16.667 16.667 0 0 1 180.252 35.855 A 21.301 21.301 0 0 1 180.4 38.401 L 180.4 59.701 A 4.785 4.785 0 0 0 180.474 60.574 Q 180.56 61.038 180.747 61.391 A 1.947 1.947 0 0 0 181.45 62.151 Q 182.363 62.716 184.146 63.319 A 32.174 32.174 0 0 0 184.7 63.501 A 23.683 23.683 0 0 1 185.259 63.694 Q 185.839 63.904 186.215 64.082 A 4.606 4.606 0 0 1 186.45 64.201 Q 186.975 64.487 186.999 65.046 A 1.265 1.265 0 0 1 187 65.101 A 1.243 1.243 0 0 1 186.958 65.434 A 0.821 0.821 0 0 1 186.55 65.951 A 1.436 1.436 0 0 1 186.246 66.071 Q 185.915 66.165 185.409 66.191 A 8.086 8.086 0 0 1 185 66.201 A 39.353 39.353 0 0 1 183.466 66.173 Q 181.843 66.109 180.8 65.901 Q 178.8 65.701 177.1 65.701 Q 175.3 65.701 173.3 65.901 A 19.251 19.251 0 0 1 171.824 66.083 Q 171.072 66.149 170.209 66.178 A 42.248 42.248 0 0 1 168.8 66.201 A 5.431 5.431 0 0 1 168.12 66.162 Q 167.418 66.073 167.089 65.778 A 0.867 0.867 0 0 1 166.8 65.101 A 1.388 1.388 0 0 1 166.854 64.702 A 0.988 0.988 0 0 1 167.35 64.101 A 3.632 3.632 0 0 1 167.711 63.932 Q 168.114 63.767 168.714 63.602 A 17.011 17.011 0 0 1 169.1 63.501 A 16.001 16.001 0 0 0 170.315 63.164 Q 171.544 62.766 172.3 62.251 A 2.36 2.36 0 0 0 173.225 60.968 Q 173.356 60.555 173.389 60.049 A 5.401 5.401 0 0 0 173.4 59.701 L 173.4 38.701 Q 173.4 35.001 171 32.101 Q 168.6 29.201 165.4 29.201 A 17.062 17.062 0 0 0 161.549 29.613 A 12.048 12.048 0 0 0 156.7 31.901 Q 153.9 34.101 153.9 39.101 L 153.9 59.701 Q 153.9 61.001 154.526 61.753 A 2.383 2.383 0 0 0 155.1 62.251 Q 156.3 63.001 158.4 63.501 A 7.837 7.837 0 0 1 159.211 63.719 Q 160.002 63.983 160.373 64.356 A 1.031 1.031 0 0 1 160.7 65.101 Q 160.7 66.201 158.7 66.201 A 39.881 39.881 0 0 1 156.962 66.165 Q 156.189 66.131 155.523 66.065 A 16.407 16.407 0 0 1 154.3 65.901 Q 152.616 65.747 151.283 65.712 A 29.122 29.122 0 0 0 150.5 65.701 Q 148.7 65.701 146.7 65.901 A 19.251 19.251 0 0 1 145.224 66.083 Q 144.472 66.149 143.609 66.178 A 42.248 42.248 0 0 1 142.2 66.201 A 5.431 5.431 0 0 1 141.52 66.162 Q 140.818 66.073 140.489 65.778 A 0.867 0.867 0 0 1 140.2 65.101 A 1.243 1.243 0 0 1 140.242 64.767 A 0.821 0.821 0 0 1 140.65 64.251 A 6.46 6.46 0 0 1 141.252 63.958 A 7.84 7.84 0 0 1 141.65 63.801 Q 142.2 63.601 142.5 63.501 A 29.317 29.317 0 0 0 143.695 63.111 Q 144.767 62.733 145.461 62.371 A 6.153 6.153 0 0 0 145.85 62.151 A 2.023 2.023 0 0 0 146.684 61.098 Q 146.819 60.736 146.87 60.28 A 5.24 5.24 0 0 0 146.9 59.701 L 146.9 38.701 Q 146.9 35.001 144.5 32.101 Q 142.1 29.201 138.9 29.201 A 17.062 17.062 0 0 0 135.049 29.613 A 12.048 12.048 0 0 0 130.2 31.901 A 5.907 5.907 0 0 0 128.262 34.479 Q 127.839 35.51 127.651 36.819 A 16.07 16.07 0 0 0 127.5 39.101 L 127.5 59.701 A 4.785 4.785 0 0 0 127.574 60.574 Q 127.66 61.038 127.847 61.391 A 1.947 1.947 0 0 0 128.55 62.151 Q 129.463 62.716 131.246 63.319 A 32.174 32.174 0 0 0 131.8 63.501 Q 132.089 63.597 132.702 63.786 A 124.136 124.136 0 0 0 132.75 63.801 A 4.127 4.127 0 0 1 133.162 63.95 Q 133.363 64.036 133.523 64.136 A 1.838 1.838 0 0 1 133.75 64.301 A 0.983 0.983 0 0 1 134.097 65.016 A 1.358 1.358 0 0 1 134.1 65.101 Q 134.1 66.201 132.1 66.201 A 37.485 37.485 0 0 1 130.419 66.165 Q 128.916 66.097 127.8 65.901 Q 126.116 65.747 124.783 65.712 A 29.122 29.122 0 0 0 124 65.701 Q 122.4 65.701 120.2 65.901 A 14.134 14.134 0 0 1 119.093 66.059 Q 117.845 66.191 116.144 66.2 A 47.263 47.263 0 0 1 115.9 66.201 A 5.431 5.431 0 0 1 115.22 66.162 Q 114.518 66.073 114.189 65.778 A 0.867 0.867 0 0 1 113.9 65.101 Q 113.9 64.501 114.45 64.201 Q 114.877 63.968 115.694 63.675 A 24.185 24.185 0 0 1 116.2 63.501 A 28.68 28.68 0 0 0 117.347 63.111 Q 118.695 62.618 119.45 62.151 A 2.023 2.023 0 0 0 120.284 61.098 Q 120.419 60.736 120.47 60.28 A 5.24 5.24 0 0 0 120.5 59.701 Z M 34.2 66.601 L 29.6 66.401 Q 18.799 65.91 13.591 65.901 A 111.403 111.403 0 0 0 13.4 65.901 A 38.518 38.518 0 0 0 12.23 65.92 Q 10.918 65.96 9.153 66.083 A 126.653 126.653 0 0 0 8.9 66.101 Q 6.913 66.372 3.62 66.398 A 90.503 90.503 0 0 1 2.9 66.401 A 9.767 9.767 0 0 1 1.952 66.359 Q 1.026 66.268 0.539 65.98 A 0.98 0.98 0 0 1 0 65.101 Q 0 64.633 0.205 64.371 A 0.812 0.812 0 0 1 0.6 64.101 Q 1.2 63.901 3.3 63.501 Q 6.618 62.889 8.145 61.592 A 4.335 4.335 0 0 0 8.55 61.201 A 4.717 4.717 0 0 0 9.448 59.683 Q 9.965 58.315 9.998 56.28 A 17.299 17.299 0 0 0 10 56.001 L 10 11.001 A 13.346 13.346 0 0 0 9.889 9.209 Q 9.615 7.197 8.671 6.087 A 3.822 3.822 0 0 0 8.55 5.951 A 5.142 5.142 0 0 0 7.311 5.005 Q 5.824 4.165 3.3 3.701 A 24.705 24.705 0 0 1 2.438 3.55 Q 1.228 3.314 0.7 3.051 A 1.329 1.329 0 0 1 0.284 2.737 Q 0.054 2.473 0.01 2.089 A 1.655 1.655 0 0 1 0 1.901 Q 0 0.832 1.961 0.642 A 9.799 9.799 0 0 1 2.9 0.601 L 8.6 0.701 Q 9.834 0.783 12.69 0.797 A 256.776 256.776 0 0 0 14 0.801 Q 18.1 0.801 24.3 0.301 Q 26.4 0.201 28.15 0.101 A 74.644 74.644 0 0 1 29.385 0.04 Q 30.35 0.001 31.1 0.001 Q 41.298 0.001 48.727 2.555 A 34.048 34.048 0 0 1 52.6 4.151 A 31.814 31.814 0 0 1 59.369 8.528 A 24.938 24.938 0 0 1 65.05 15.451 A 31.791 31.791 0 0 1 68.811 27.813 A 39.208 39.208 0 0 1 69 31.701 Q 69 41.101 64.3 49.151 Q 59.6 57.201 51.6 61.901 Q 43.6 66.601 34.2 66.601 Z M 105.5 40.201 L 84.4 40.201 A 4.098 4.098 0 0 0 83.716 40.254 Q 83.353 40.315 83.07 40.449 A 1.604 1.604 0 0 0 82.45 40.951 Q 82.03 41.523 81.931 42.939 A 13.79 13.79 0 0 0 81.9 43.901 Q 81.9 48.601 83.95 52.601 Q 86 56.601 89.55 58.951 Q 93.1 61.301 97.3 61.301 Q 103.2 61.301 107.1 56.801 A 3.879 3.879 0 0 1 107.376 56.47 Q 107.817 56.001 108.2 56.001 Q 108.922 56.001 108.992 56.814 A 2.155 2.155 0 0 1 109 57.001 A 4.811 4.811 0 0 1 108.703 58.61 Q 108.269 59.835 107.2 61.201 A 14.626 14.626 0 0 1 102.385 65.262 A 17.547 17.547 0 0 1 101.4 65.751 Q 97.8 67.401 93.8 67.401 A 18.356 18.356 0 0 1 88.121 66.546 A 16.216 16.216 0 0 1 84.25 64.701 A 17.311 17.311 0 0 1 78.645 58.686 A 21.432 21.432 0 0 1 77.8 57.051 A 24.28 24.28 0 0 1 75.851 50.442 A 32.123 32.123 0 0 1 75.5 45.601 Q 75.5 40.001 78.15 35.101 A 21.352 21.352 0 0 1 83.048 28.956 A 20.192 20.192 0 0 1 85.2 27.351 Q 89.6 24.501 94.8 24.501 A 16.585 16.585 0 0 1 99.4 25.109 A 12.892 12.892 0 0 1 104.65 28.051 A 11.68 11.68 0 0 1 108.491 36.584 A 15.329 15.329 0 0 1 108.5 37.101 A 4.629 4.629 0 0 1 108.357 38.309 Q 107.924 39.905 106.188 40.154 A 4.84 4.84 0 0 1 105.5 40.201 Z M 18 9.201 L 18 53.801 A 11.504 11.504 0 0 0 18.303 56.539 A 6.616 6.616 0 0 0 22.05 61.201 A 17.287 17.287 0 0 0 25.488 62.358 Q 27.238 62.764 29.32 62.948 A 41.916 41.916 0 0 0 33 63.101 A 26.653 26.653 0 0 0 41.772 61.69 A 24.213 24.213 0 0 0 46.75 59.301 A 25.538 25.538 0 0 0 56.045 48.961 A 30.315 30.315 0 0 0 56.15 48.751 Q 59.5 42.001 59.5 33.401 A 35.768 35.768 0 0 0 58.531 24.902 A 28.57 28.57 0 0 0 55.5 17.301 A 29.139 29.139 0 0 0 49.37 9.794 A 26.637 26.637 0 0 0 45.05 6.751 Q 38.6 3.101 31.6 3.101 A 154.146 154.146 0 0 0 29.116 3.119 Q 25.638 3.176 23.65 3.401 A 10.408 10.408 0 0 0 21.964 3.725 Q 21.016 3.996 20.272 4.443 A 5.498 5.498 0 0 0 19.5 5.001 A 3.945 3.945 0 0 0 18.387 6.668 Q 18.147 7.326 18.056 8.144 A 9.561 9.561 0 0 0 18 9.201 Z M 212.7 67.301 Q 207.2 67.301 202.65 64.701 Q 198.1 62.101 195.45 57.501 A 20.005 20.005 0 0 1 192.823 48.26 A 23.881 23.881 0 0 1 192.8 47.201 A 21.305 21.305 0 0 1 194.748 38.395 A 26.013 26.013 0 0 1 195.75 36.401 Q 198.7 31.101 203.75 27.801 Q 208.8 24.501 214.7 24.501 Q 220.4 24.501 225.1 27.251 Q 229.8 30.001 232.55 34.651 Q 235.3 39.301 235.3 44.601 Q 235.3 50.601 232.7 55.801 Q 230.1 61.001 225 64.151 A 20.684 20.684 0 0 1 217.805 66.858 A 28.16 28.16 0 0 1 212.7 67.301 Z M 214.8 64.301 Q 222.3 64.301 225.1 58.801 A 14.263 14.263 0 0 0 226.155 55.972 Q 226.965 52.938 227.081 48.515 A 57.873 57.873 0 0 0 227.1 47.001 Q 227.1 42.201 225.3 37.701 A 20.78 20.78 0 0 0 222.992 33.399 A 17.03 17.03 0 0 0 220.3 30.401 Q 217.1 27.601 213 27.601 A 15.685 15.685 0 0 0 210.656 27.767 Q 209.198 27.987 208 28.501 A 8.582 8.582 0 0 0 205.647 30.028 A 11.8 11.8 0 0 0 204.2 31.601 A 12.401 12.401 0 0 0 202.328 35.025 A 16.115 16.115 0 0 0 201.7 37.251 Q 201.045 40.388 201.003 44.359 A 51.729 51.729 0 0 0 201 44.901 Q 201 49.901 202.8 54.351 A 20.795 20.795 0 0 0 205.054 58.543 A 16.839 16.839 0 0 0 207.75 61.551 A 11.316 11.316 0 0 0 211.143 63.634 A 10.13 10.13 0 0 0 214.8 64.301 Z M 84.6 37.101 L 93.7 37.101 A 71.831 71.831 0 0 0 96.442 37.052 Q 98.948 36.956 100.698 36.67 A 18.964 18.964 0 0 0 101.1 36.601 A 0.647 0.647 0 0 0 101.576 36.264 Q 101.869 35.788 101.897 34.646 A 10.104 10.104 0 0 0 101.9 34.401 A 5.922 5.922 0 0 0 100.085 30.112 A 8.564 8.564 0 0 0 99.35 29.451 Q 96.8 27.401 93.3 27.401 A 8 8 0 0 0 90.706 27.852 A 11.201 11.201 0 0 0 88.75 28.751 A 13.023 13.023 0 0 0 85.866 30.97 A 11.744 11.744 0 0 0 84.9 32.101 Q 83.487 33.985 83.405 35.869 A 5.338 5.338 0 0 0 83.4 36.101 Q 83.4 37.101 84.6 37.101 Z" vector-effect="non-scaling-stroke"/></g></svg>
        </div>


    </div>

      <div class="container demoIntro">

            <div class="col-md">
    

            <form method="post">
    
    
              {% csrf_token %}
    
              {{ form.data }}
    
            <button type="submit" class="btn btn-dark btn-block"> Enter Text To Compress </button>
    
            </form>
    
            </div>

      </div>  

        

    <div class="container enjoydemo">
        
        <div class="row">
                
        
                <p hidden id="entropy" > {{ text }}</p>
                <p hidden id="avg"> {{ avgLen }} </p>
    
                <canvas id="myChart"> </canvas>

                


        
    </div>

            
    

      </div>


    </div>
      <p hidden id="GraphData"> {{ codes }} </p>
      <div class="space container enjoydemo">

        

        <div class="network"> Network Graph </div>

      </div>

      <div class="space container enjoydemo">

            <p hidden id="timebin" > {{ bintime }}</p>
            <p hidden id="timeveb"> {{ vEbtime }} </p>
            <p hidden id="timeyfast"> {{ yFasttime }} </p>

            <canvas id="myTimes"> </canvas>


      </div>

      <div class="container">Compressed Code</div>
      <div class="row just">
      <header class="Compress1">Compressed Code</header>
    </div>

      <div class="container enjoydemo1">
            <div class="row just">
            <header class="Compress"> {{ string }} </header>
      </div>


<script>

$(document).ready(function() { 


    var Gdata = $('#GraphData').text();

    var i;

    var letters = [];

    var codes = [];


    var isletter = true;

    for (i = 0; i < Gdata.length; i++) {

        if(Gdata[i] == '\'' && isletter == true){

            letters.push(Gdata[i+1]);
            i = i + 3;
            isletter = false;
        }

        if(Gdata[i] == '\'' && isletter == false){

            let j = i+1;

            let codestr = "";


            while(Gdata[j] != '\'' && j < Gdata.length){

                
                codestr += Gdata[j];
                j++;
                

            }
            
            codes.push(codestr);
            i = j + 1;
            isletter = true;

        }


        
    }

console.log(letters);
console.log(codes);


    var nodes = [];

    let z;
    for(z = 0; z < codes.length; z++){

        let tmp = {};
        tmp['id'] = codes[z];
        tmp['label'] = letters[z];
        tmp['color'] = '#d6753e'
        nodes.push(tmp);

    }

    tmp = {};
    tmp['id'] = ' ';
    tmp['label'] = 'Root';
    tmp['color'] = '#adadad';
    nodes.push(tmp);
    
    var edges = [];

    for(let v = 0; v < codes.length; v++){

        for(let digit = 0; digit < codes[v].length; digit++){

            var sub = codes[v].substr(0, digit);

            if(sub == ''){

                console.log('Root!');
                sub = codes[v].substr(0, digit + 1);

                var exists = false;
                for(let n = 0; n < nodes.length; n++){

                    if(nodes[n]['id'] == sub){
                        exists = true;
                        break;
                    }

                }

                if(exists == false){

                    tmp = {};
                    tmp['id'] = sub;
                    tmp['label'] = ' ';
                    tmp['color'] = '#edab49';
                    nodes.push(tmp);

                    e = {};
                    e['from'] = ' ';
                    e['to'] = sub;

                    if(codes[v][0] == '0'){
                        e['label'] = '0';

                    }
                    else{
                        e['label'] = 1;
                    }
                    edges.push(e);


                }
            }

            //Non Root Case
            else{

                var exists = false;
                
                sub2 = codes[v].substr(0, digit + 1);
                for(let n = 0; n < nodes.length; n++){

                    if(nodes[n]['id'] == sub2){
                        exists = true;
                        break;
                    }

                }

                if(exists == false){

                    tmp = {};
                    tmp['id'] = sub2;
                    tmp['label'] = ' ';
                    tmp['color'] = '#edab49';
                    nodes.push(tmp);

                    e = {};
                    e['from'] = sub;
                    e['to'] = sub2;
                    e['label'] = sub2;
                    edges.push(e);

                }

                else{

                    var eExist = false;

                    for(let m = 0; m < edges.length; m++){

                        if(edges[m]['from'] == sub && edges[m]['to'] == sub2){
                            eExist = true;
                            break;
                        }

                    }
                    if(eExist == false){
                        e = {};
                        e['from'] = sub;
                        e['to'] = sub2;
                        e['label'] = sub2;
                        edges.push(e);
                    }
                }


            }

        }


    }

    




    console.log(nodes);
    

    var data = {
        nodes: nodes,
        edges: edges
    };

        var options = {
        layout: {
            hierarchical: {
                direction: "UD",
                sortMethod: "directed"
            }
        },
        interaction: {dragNodes :false},
        physics: {
            enabled: false
        },
        
    };


    var container = document.querySelector('.network');

    network = new vis.Network(container, data, options);



});


</script>
      

    
</body>
</html>
